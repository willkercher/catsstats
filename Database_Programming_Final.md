
# Database Programming Final - Cats Stats Database 
## Team Members
Will Kercher, Jack Potter

## Included in Project 
Database Creation
Database Population
SQL Queries
Website html and app.py files

## Source Data
The source data is a collection of member data from the `Cats Stats club on campus. As President (Will) and Golf Manager (Jack), the data regarding members of the club was easily accessible but not cleaned and relatively unorganized. All of the data was initially housed in an excel spreadsheet, containing contact information about each member, their divisions, positions, etc. Having difficulty sorting through this information on a weekly basis to effectively run the club, our group decided to consolidate and clean the data in a sql database that future club leaders will be able to use.

## Database Design
As mentioned above, all of the data was initially stored in excel spreadsheets and far from normalized. So, the firt step was dividing the data into separate tables, focusing on how to maintain most the the 'member' data in one table and then connecting associated division, position, and coach contacts to each member. With each member being associated with a division and position, dependencies existed within the initial table that needed to be broken into separate tables. Further, primary and foreign keys were needed to normalize the data. Although not included in the code, many inconsistencies needed to be fixed such as improper syntax for certain columnns, trailing spaces, and null values. 

Beginning with the member table, which remains at the center of the database, contains a surrogate primary key for each member and also includes contact information about each member, graduation dates, and status. Multiple status-like columns exist to determine whether the student exists in Wildcatsync, whether the student is graduated, and whether the student is an active or inactive member. This information is most crucial for the database as it provides a directory of all members in the club which was the main objective of the database's creation. 

The next table is the division table which contains each division or sub-group of the club that a member can be associated with, along with the student-leader of that division. This table is connected to the member table through a foreign key for each division that is represented by a surrogate primary key in the division table. This table becomes crucial when diciphering how members of the club are split up and their individual responsibitilities. It also allows division leaders or the executive board to single out and contact groups of members in the club. Beyond just the division table, a sub-division table exists when a division is sufficiently large to the point where it is broken further into teams. This tables operates the same way as the division table, being connected to the member table through a foreign key to the sub-division surrogate primary key.

Another important aspect to the database are the positions that each member holds. Further than the division and sub-division, members are assigned specific positions within their group. Due to the many-to-many relationship between members and positions, it was necessary to create a junction table that connected these two variables, and thus the member and positions table, with the primary key being a surrogate composite key containing fk_member_id and fk_position_id. This relationship became notably useful in the creation of the website when positions needed to be selected for each member and added to the database, as well as reflecting the current positions that each member currently holds. 

The next set of tables revolve around the coach contacts that are associated with each of the Divison I sports that the club assists on campus. To begin, the contact table contains a primary surrogate key for each coach contact, as well as their email, phone, number, etc. The table as contains multiple foreign keys such as division, role, and rank that denote their positions in relation to the team and to the club. Specifically, the division column connects to the division table, since the sport and division are synonymous to the club. Further, the role table demonstrates the role a coach plays within their organization, for example, 'Head Coach' or 'Staff'. Finally, the rank column reveals the order that the club uses when communicating with the sports team. For example, our 'Primary' contact is usually not the 'Head Coach' of a team.

In terms of the view, our view is stored within the python script for the website so that member data can be reflected. This view produces a table containing member name, email, graudation year, current positions, and an additional column for adding new positions for each member. This view allows future executive members of the club to easily see the most important information about members and provides a user-friendly manner for updating the roster and specifically position information about each member. Finally, the website has a functionality that allows new members, their email, class year, and position to be added to the roster. 

Finally, there were a few functions that we implemented into the database. The first was a simple concatenation function with a trigger so that full_names were generated based on the first_name and last_name columns. The full_name column is also what is displayed on the website so this function helps keep everything in line visually. The two other functions are also included within the member table and determine what members are graduated and therefore should not be in the Wildcatsync directory. The first part of the function updates a graduation date column that uses graduation year and the middle of may as a date. The nex step of the function evaluates that date against the current date to determine whether that person is still a student or not. All of these also account for members who are academic advisors and act on a trigger. 

Entity-Relationship Diagram (ERD):
![alt text](image.png)

### Data Sourcing and Integration
Once the group determined a real world issue - difficulty for clubs on campus to keep track of their members - it was relatively easy to find data for the project. With both members of the team being leaders in the club, access to (unofrganized and uncleaned) data was easy. The most difficult pieces were determining how to organize the data into a schema and cleaning data that wasn't standardized. Coming from two initial excel spreadsheets, the team had to do a lot of brainstorming on the multiple tables that were necessary and would reflect 3NF. Further, there were many inconsistencies in the data; determining where these errors occured requird the implementation of many queries from class that searched for null values, leading and trailing spaces, and values that failed certain tests and contraints. After finding the inconsistencies, case/when clauses were mostly used to standardize the data. 

### Design Reflection 
Some of the most difficult pieces in designing the schema came when it seemed like certain variables didn't necessarily fit together or there were many-to-many relationships. To start with the relationships, the decision to create a junction table between members and positions came after lots of brainstorming and deliberation on whether that was the correct approach. Ultimately, the junction table allowed the group to proceed in 3NF, but importantly generate functionality within the website's design. Next, another great decision that the group encountered was whether to include the coach contacts that seemed potentially disconnected from the database. After dicussion, the contacts table was included and connected through the divison table, Finally, tables such as previous_divisons and previous_positions, while important, generated too much complexity in the databse without providing enough useful information. Thus, those tables were removed from the schema.

### Project Outcomes and Learning
Overall, this project was a great way to end the course and allow teams to practically put skills and knowledge to use on a topic that personally interested them. Having to take unorganized and uncleaned data and generate an entire database schema was challenging but allowed the group to get creative and overcome challenges in a way that would be expected in the real-world/workforce. Further, the inclusion of a coded website that is backed by the database generated another area where the group could learn and gain exposure to multiple languages and tasks. Appraoching the project in multiple dimensions (database, scapring, website) certainly opened up our eyes to the way databases can be applied in real-world settings. 

### Acknowledgments
Firstly, we'd like to thank Pete Benbow for his help throughout this entire project. Next, we'd like to acknowledge the help of ChatGPT that mostly aided in our creation of python script for the website, since our group was inexperienced in that area.